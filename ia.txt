const mineflayer = require('mineflayer');

const bot = mineflayer.createBot({
  host: 'localhost', // IP do servidor
  port: 25565,       // Porta do servidor
  username: 'AutoEquipBot' // Nome do bot
});

bot.on('spawn', () => {
  console.log('Bot conectado e pronto!');
});

// Função para verificar se o item é um escudo
function isShield(item) {
  return item && item.name === 'shield';
}

// Quando receber um item no inventário
bot.on('windowUpdate', () => {
  const items = bot.inventory.items();
  for (let item of items) {
    if (isShield(item)) {
      equipShield(item);
    } else if (bot.canEquip(item, 'hand')) {
      equipItem(item);
    }
  }
});

// Equipar qualquer item na mão principal
function equipItem(item) {
  bot.equip(item, 'hand').then(() => {
    console.log(`Equipado na mão principal: ${item.name}`);
  }).catch(console.error);
}

// Equipar escudo na mão secundária e ativar
function equipShield(item) {
  bot.equip(item, 'off-hand').then(() => {
    console.log('Escudo equipado na mão secundária.');
    bot.activateItem(); // Segura o botão para ativar escudo
  }).catch(console.error);
}