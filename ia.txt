const mineflayer = require('mineflayer');

const bot = mineflayer.createBot({
  host: 'localhost', // Substitua pelo IP do seu servidor
  port: 25565,       // Substitua pela porta do seu servidor
  username: 'EscudoBot' // Nome do bot
});

// Função para verificar se o item é um escudo
function isShield(item) {
  return item && item.name === 'shield';
}

// Equipar escudo na mão secundária e ativar
async function equipAndActivateShield() {
  const shield = bot.inventory.items().find(isShield);
  if (shield) {
    try {
      await bot.equip(shield, 'off-hand');
      console.log('Escudo equipado na mão secundária.');
      bot.activateItem(); // Ativa o escudo
    } catch (err) {
      console.error('Erro ao equipar o escudo:', err);
    }
  } else {
    console.log('Escudo não encontrado no inventário.');
  }
}

// Evento disparado quando o bot entra no jogo
bot.on('spawn', () => {
  console.log('Bot conectado.');
  // Espera o inventário carregar antes de tentar equipar o escudo
  setTimeout(equipAndActivateShield, 1000);
});

// Evento disparado quando o inventário é atualizado
bot.on('windowUpdate', equipAndActivateShield);

// Evento disparado quando o bot coleta um item
bot.on('itemPickup', equipAndActivateShield);